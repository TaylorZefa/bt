import{b as V,r as A,c as E,o as P,e as W,f as k,g as l,w as t,h as e,aw as j,F as L,ax as O,j as p,t as u,i as z,E as G,k as J}from"./index-85da6439.js";import{E as M}from"./el-dialog-378dcb09.js";import{E as Q}from"./el-radio-fb4566ed.js";import{E as X,a as Y}from"./el-form-item-9d327681.js";import{r as Z,l as $,a as ee,s as ae,u as le}from"./app-dept-f21ac6cd.js";import{u as te}from"./use-table-handlers-9f4dc289.js";const oe={class:"main-body"},ne={class:"toolbar"},fe={__name:"Dept",setup(de){const i=V({name:""}),r=V({id:"",name:"",parentId:null}),{t:a,tableRef:C,dialogVisible:c,isEdit:B,formLoading:re,formRef:v,doSearch:w,doAdd:D,doEdit:I,doSubmit:T,doClose:f,doRemove:R}=te(r),_=A([]),U=E(()=>[{prop:"id",label:a("thead.ID")},{prop:"name",label:a("thead.name")},{prop:"createdBy",label:a("thead.createdBy")},{prop:"createdTime",label:a("thead.createdTime"),minWidth:160},{prop:"lastUpdatedBy",label:a("thead.updatedBy")},{prop:"lastUpdateTime",label:a("thead.updatedTime"),minWidth:160}]),x=E(()=>({name:[{required:!0,message:a("form.usernameHolder"),trigger:["change","blur"]}]}));function h(n){ee(n?{id:n.id}:null).then(o=>{_.value=o.data})}function F(){h(),D()}function S(n){h(n),I(n)}function H(n,o){R(Z,n,o)}function b(){T({save:ae,update:le})}return(n,o)=>{const y=G,s=Y,m=J,g=X,K=O,N=Q,q=M;return P(),W(L,null,[k("div",oe,[k("div",ne,[l(g,{inline:!0,model:e(i)},{default:t(()=>[l(s,null,{default:t(()=>[l(y,{modelValue:e(i).name,"onUpdate:modelValue":o[0]||(o[0]=d=>e(i).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"search",type:"primary",onClick:e(w)},{default:t(()=>[p(u(e(a)("action.search")),1)]),_:1},8,["onClick"])]),_:1}),l(s,null,{default:t(()=>[l(m,{icon:"plus",type:"primary",onClick:F},{default:t(()=>[p(u(e(a)("action.add")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),l(K,{"row-key":"id",ref_key:"tableRef",ref:C,"get-page":e($),filters:e(i),columns:e(U),showBatchDelete:!1,showPageination:!1,operations:n.operations,onHandleEdit:S,onHandleDelete:H},null,8,["get-page","filters","columns","operations"])]),l(q,{title:e(B)?e(a)("action.edit"):e(a)("action.add"),width:"40%",draggable:"",modelValue:e(c),"onUpdate:modelValue":o[3]||(o[3]=d=>j(c)?c.value=d:null),"close-on-click-modal":!1,onClose:e(f)},{footer:t(()=>[l(m,{onClick:e(f)},{default:t(()=>[p(u(e(a)("action.cancel")),1)]),_:1},8,["onClick"]),l(m,{type:"primary",onClick:b},{default:t(()=>[p(u(e(a)("action.confirm")),1)]),_:1})]),default:t(()=>[l(g,{model:e(r),rules:e(x),ref_key:"formRef",ref:v,onKeyup:z(b,["enter"]),"label-width":"80px"},{default:t(()=>[l(s,{label:e(a)("thead.name"),prop:"name"},{default:t(()=>[l(y,{modelValue:e(r).name,"onUpdate:modelValue":o[1]||(o[1]=d=>e(r).name=d),placeholder:e(a)("thead.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(s,{label:e(a)("form.parent"),prop:"parentId"},{default:t(()=>[l(N,{modelValue:e(r).parentId,"onUpdate:modelValue":o[2]||(o[2]=d=>e(r).parentId=d),props:{label:"name",value:"id",checkStrictly:!0,emitPath:!1},options:e(_),clearable:"",filterable:"",class:"w100p"},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1},8,["model","rules","onKeyup"])]),_:1},8,["title","modelValue","onClose"])],64)}}};export{fe as default};
