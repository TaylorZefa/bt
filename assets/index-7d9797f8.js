import{u as v,a as y,r as f,b as E,c as V,d as k,o as B,e as I,f as _,g as o,w as t,h as a,i as R,t as g,j as H,l as K,E as N,k as q}from"./index-85da6439.js";import{E as z,a as A}from"./el-form-item-9d327681.js";const C={class:"page flex-center"},F={class:"sign-box"},L={class:"title"},Z={__name:"index",setup(S){const h=v(),{t:e}=y(),c=f(),r=E({account:"",password:""}),w=V(()=>({account:[{required:!0,message:e("form.usernameHolder"),trigger:["change","blur"]},{pattern:/^[a-zA-Z][a-zA-Z0-9_-]{3,31}$/,message:e("form.usernameError"),trigger:["change","blur"]}],password:{required:!0,min:4,message:e("form.passwordError"),trigger:["change","blur"]}})),l=f(!1),n=k();function i(){c.value.validate(m=>{m&&(l.value=!0,K(r).then(s=>{n.commit("user/setToken",s.data.token),n.dispatch("user/refreshInfo"),n.commit("setRouteLoaded",!1),h.push("/")}).finally(()=>{l.value=!1}))})}return(m,s)=>{const p=N,u=A,b=q,x=z;return B(),I("div",C,[_("div",F,[o(x,{ref_key:"formRef",ref:c,model:r,rules:a(w),"label-width":"86px",onKeyup:R(i,["enter","native"])},{default:t(()=>[_("h3",L,g(a(e)("login")),1),o(u,{label:a(e)("form.username"),prop:"account"},{default:t(()=>[o(p,{modelValue:r.account,"onUpdate:modelValue":s[0]||(s[0]=d=>r.account=d),placeholder:a(e)("form.usernameHolder"),"prefix-icon":"user"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:a(e)("form.password"),prop:"password"},{default:t(()=>[o(p,{modelValue:r.password,"onUpdate:modelValue":s[1]||(s[1]=d=>r.password=d),type:"password",placeholder:a(e)("form.passwordHolder"),"prefix-icon":"lock"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(u,{label:""},{default:t(()=>[o(b,{type:"primary",loading:l.value,class:"w100p",onClick:i},{default:t(()=>[H(g(a(e)("login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules","onKeyup"])])])}}};export{Z as default};
